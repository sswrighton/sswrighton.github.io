---
layout: post
title: IIS7 and the Case of the Reserved Reports
date: '2009-11-18T22:27:00.000-06:00'
updated: "2019-03-07 19:46:00"
permalink: "/2009/11/iis7-and-case-of-reserved-reports.html"
author: Stephen Wrighton
tags:
- ".NET"
- ASP.Net
- SQL Server
- IIS
- Patent
modified_time: '2009-11-18T22:35:46.972-06:00'
blogger_id: tag:blogger.com,1999:blog-947968907697915479.post-8045532713632764079
blogger_orig_url: https://programmer.wrighton.org/2009/11/iis7-and-case-of-reserved-reports.html
---

I had fun this morning at work hunting down something highly interesting in regards to IIS7.<br /><br />What was happening, is that a client had kind of.... deleted the virtual server on which a web application resided. So, it was getting redeployed to a Windows 2008 box that also performed as a SQL SERVER 2008 box.<br /><br />Well, my boss deployed the application, and when he went to test, it all worked, but the reports.  Every time he attempted to run a report, the only thing that came back was a "Service Unavailable" message.<br /><br />He upgraded the application from .NET 1.1 to 3.5, he played with the configuration values, and a host of other things up to and including special logging just for the 503 error hiding behidn the "Service Unavailable" message.<br /><br />Nothing worked. Every other piece of the application was happy, but any of the reports.<br /><br />So, we get together and start trouble shooting.<br /><br />First thing we do, is create a blank ASPX file that just implements a report viewer, and it still comes back as "Service Unavailable."<br /><br />Well, we add another new blank ASPX file, thsi time with out even the report viewer, and it still comes back as "Service Unavailable."<br /><br />Then we drop in a old-fashioned HTML file, and get... the exact same results.<br /><br />One is starting to get frustrated at this point.<br /><br />So, we create a new folder, and try the HTML file in it. And we get served the HTML file.<br /><br />So, we copy one of the existing reports into the new folder... and it works.<br /><br />Confused, we discuss things, and I had the brilliant idea that maybe, the system was expecting the RDLC files to be located in a different folder than the ASPX files that display them. After all, copying over the one report caused it to work, and that ASPX file points to the path of the RDLC file which it is designed to load.<br /><br />So, we create a new RDLC folder, move the RDLC files over to it, update all the aspx files to point to the new RDLC folder, publish, test and....<br /><br />get "Service Unavailable."<br /><br />So, we back out of all of those changes, republish, and are still getting "Service Unavailable."<br /><br />I have him rename the folder in Visual Studio and republish and...<br /><br />it works.<br /><br />So, we're wondering if it was just a bad compile or something. So we rename the folder back to REPORTS and republish, and upon testing get...<br /><br />"Service Unavailable."<br /><br />One can imagine the head banging upon wood desks that began at this moment.<br /><br />Then a horrible, horrible idea came upon me: what if "reports" was a reserved word in IIS7.<br /><br />Almost fearful of the results, we just change the folder name on the server from "reports" to "reporting" and it works.<br /><br />One is flabbergasted.<br /><br />So, we rename the folder in Visual Studio and then update all the links to the reports and republish, and it's happy as a lark.  It works, spits out the report and as far as it is concerned, life is good.<br /><br />Of course, neither myself nor my boss could believe that Microsoft would make the word REPORTS a reserved keyword for IIS.<br /><br />The very thought is insane, but that appeared to be what was happening.<br /><br />So, of course, this demanded some Google time.<br /><br />Ultimately, this <a href="http://forums.iis.net/t/1157304.aspx">link</a>  was found, and it explained the reason why the REPORTS folder was giving us a 503 error. <br /><br />It seems that when SQL SERVER 2008 is installed with REPORTING SERVICES, the system registered the REPORTS name with the HTTP.SYS process, which means that the request for the REPORTS folder was never actually making it to IIS.<br /><br />Which explained why the ASPX page wasn't being served, and why the standard HTML file wasn't being served, in fact it explained just about everything.<br /><br />The only thing it didn't explain is why on earth Microsoft would make this decision!